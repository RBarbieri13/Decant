# Backlinks Feature Architecture

## System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER INTERFACE                          â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              DetailPanel Component                       â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  [Overview] [Properties] [Related] [Backlinks] [History]â”‚  â”‚
â”‚  â”‚                                    â–²                     â”‚  â”‚
â”‚  â”‚                                    â”‚ Active              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                       â”‚                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         BacklinksSection Component                       â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ Header: "5 backlinks"   [ğŸ“Š Grouped] [ğŸ“‹ List] â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ ğŸ”— Similar Items (2)                            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚   â”‚ ğŸ“„ Item 1         [85%]               â”‚    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚   â”‚ Technology â€¢ Tools                     â”‚    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚   â”‚ "A great tool..."                      â”‚    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚   â”‚ [tech] [dev] [tools]                   â”‚    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ ğŸ“Œ Related Items (3)                            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚   [...items...]                                  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    React Components                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  BacklinksSection                                           â”‚
â”‚  â”œâ”€â”€ useState (backlinks, loading, error, viewMode)        â”‚
â”‚  â”œâ”€â”€ useEffect (fetch on nodeId change)                    â”‚
â”‚  â”œâ”€â”€ Event Handlers                                        â”‚
â”‚  â”‚   â”œâ”€â”€ handleItemClick()                                 â”‚
â”‚  â”‚   â””â”€â”€ toggleViewMode()                                  â”‚
â”‚  â””â”€â”€ Render Methods                                        â”‚
â”‚      â”œâ”€â”€ renderLoading()                                   â”‚
â”‚      â”œâ”€â”€ renderError()                                     â”‚
â”‚      â”œâ”€â”€ renderEmpty()                                     â”‚
â”‚      â”œâ”€â”€ renderGroupedView()                               â”‚
â”‚      â””â”€â”€ renderListView()                                  â”‚
â”‚                                                             â”‚
â”‚  BacklinkItem (child component)                            â”‚
â”‚  â”œâ”€â”€ Props: backlink, onClick, styling helpers             â”‚
â”‚  â””â”€â”€ Renders individual backlink card                      â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ API Call
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    API Service Layer                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  nodesAPI.getBacklinks(nodeId, limit)                      â”‚
â”‚  â”œâ”€â”€ Constructs request URL                                â”‚
â”‚  â”œâ”€â”€ Sends GET request                                     â”‚
â”‚  â”œâ”€â”€ Handles response/errors                               â”‚
â”‚  â””â”€â”€ Returns typed BacklinksResponse                       â”‚
â”‚                                                             â”‚
â”‚  Types:                                                     â”‚
â”‚  â”œâ”€â”€ Backlink                                              â”‚
â”‚  â”œâ”€â”€ BacklinksResponse                                     â”‚
â”‚  â””â”€â”€ Error handling                                        â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ HTTP GET
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Backend Routes                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  GET /api/nodes/:id/backlinks                              â”‚
â”‚  â”œâ”€â”€ Route Registration (index.ts)                         â”‚
â”‚  â”œâ”€â”€ UUID Validation                                       â”‚
â”‚  â”œâ”€â”€ Handler: nodeRoutes.getBacklinks()                    â”‚
â”‚  â””â”€â”€ Response formatting                                   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ Function Call
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Business Logic                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  getBacklinks(req, res)                                    â”‚
â”‚  â”œâ”€â”€ 1. Validate node exists (readNode)                    â”‚
â”‚  â”œâ”€â”€ 2. Fetch similarity data (getSimilarNodes)            â”‚
â”‚  â”œâ”€â”€ 3. Batch load node details                            â”‚
â”‚  â”œâ”€â”€ 4. Calculate reference types                          â”‚
â”‚  â”‚   â”œâ”€â”€ similarity >= 0.8 â†’ "similar"                     â”‚
â”‚  â”‚   â”œâ”€â”€ similarity >= 0.6 + attrs >= 3 â†’ "sibling"        â”‚
â”‚  â”‚   â”œâ”€â”€ method === "manual" â†’ "manual"                    â”‚
â”‚  â”‚   â””â”€â”€ else â†’ "related"                                  â”‚
â”‚  â”œâ”€â”€ 5. Group by reference type                            â”‚
â”‚  â””â”€â”€ 6. Return formatted response                          â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ Database Query
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Database Layer                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  node_similarity table                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ id | node_a_id | node_b_id | similarity_score | ... â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ 1  | abc       | def       | 0.85            | ... â”‚  â”‚
â”‚  â”‚ 2  | abc       | ghi       | 0.72            | ... â”‚  â”‚
â”‚  â”‚ 3  | jkl       | abc       | 0.91            | ... â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  Query Pattern:                                             â”‚
â”‚  SELECT ... WHERE node_a_id = ? OR node_b_id = ?          â”‚
â”‚  ORDER BY similarity_score DESC                            â”‚
â”‚  LIMIT ?                                                   â”‚
â”‚                                                             â”‚
â”‚  Indexes:                                                   â”‚
â”‚  â”œâ”€â”€ idx_node_similarity_a (node_a_id)                     â”‚
â”‚  â””â”€â”€ idx_node_similarity_b (node_b_id)                     â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow

```
User Action: Click "Backlinks" tab
        â”‚
        â–¼
DetailPanel sets activeTab = 'backlinks'
        â”‚
        â–¼
BacklinksSection mounts/updates
        â”‚
        â–¼
useEffect triggers on nodeId change
        â”‚
        â–¼
Set loading = true
        â”‚
        â–¼
Call nodesAPI.getBacklinks(nodeId, 10)
        â”‚
        â–¼
API constructs URL: /api/nodes/:id/backlinks?limit=10
        â”‚
        â–¼
HTTP GET request to backend
        â”‚
        â–¼
Express route handler validates UUID
        â”‚
        â–¼
nodeRoutes.getBacklinks() executes
        â”‚
        â”œâ”€â”€â”€ readNode(nodeId) - Validate exists
        â”‚
        â”œâ”€â”€â”€ getSimilarNodes(nodeId, limit) - Query similarity
        â”‚    â”‚
        â”‚    â””â”€â”€â”€ SQL: SELECT ... FROM node_similarity
        â”‚         WHERE node_a_id = ? OR node_b_id = ?
        â”‚         ORDER BY similarity_score DESC
        â”‚         LIMIT ?
        â”‚
        â”œâ”€â”€â”€ Batch load full node details
        â”‚    â”‚
        â”‚    â””â”€â”€â”€ For each similar node:
        â”‚         readNode(similarNodeId)
        â”‚
        â”œâ”€â”€â”€ Calculate reference types & strengths
        â”‚    â”‚
        â”‚    â””â”€â”€â”€ For each backlink:
        â”‚         â”œâ”€â”€â”€ score >= 0.8 â†’ similar
        â”‚         â”œâ”€â”€â”€ score >= 0.6 + attrs >= 3 â†’ sibling
        â”‚         â”œâ”€â”€â”€ method === manual â†’ manual
        â”‚         â””â”€â”€â”€ else â†’ related
        â”‚
        â””â”€â”€â”€ Group by reference type
             â”‚
             â””â”€â”€â”€ Build response object
                  {
                    nodeId,
                    backlinks: [...],
                    grouped: { similar: [...], related: [...] },
                    total: N
                  }
        â”‚
        â–¼
Response sent to frontend
        â”‚
        â–¼
API service receives response
        â”‚
        â–¼
BacklinksSection setState:
  - backlinks = response.backlinks
  - grouped = response.grouped
  - loading = false
        â”‚
        â–¼
Component re-renders with data
        â”‚
        â–¼
Display grouped view (default)
        â”‚
        â–¼
User clicks backlink item
        â”‚
        â–¼
handleItemClick(backlinkNodeId)
        â”‚
        â–¼
onNavigate(backlinkNodeId) callback
        â”‚
        â–¼
Parent component (DetailPanel) updates selectedNode
        â”‚
        â–¼
Cycle repeats for new node
```

## State Management

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         BacklinksSection Component State           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  backlinks: Backlink[]                             â”‚
â”‚  â”œâ”€â”€ Initial: []                                   â”‚
â”‚  â””â”€â”€ Updated: After successful API call            â”‚
â”‚                                                     â”‚
â”‚  grouped: Record<string, Backlink[]>               â”‚
â”‚  â”œâ”€â”€ Initial: {}                                   â”‚
â”‚  â””â”€â”€ Updated: { similar: [...], related: [...] }   â”‚
â”‚                                                     â”‚
â”‚  loading: boolean                                  â”‚
â”‚  â”œâ”€â”€ Initial: true                                 â”‚
â”‚  â”œâ”€â”€ During fetch: true                            â”‚
â”‚  â””â”€â”€ After response: false                         â”‚
â”‚                                                     â”‚
â”‚  error: string | null                              â”‚
â”‚  â”œâ”€â”€ Initial: null                                 â”‚
â”‚  â”œâ”€â”€ On success: null                              â”‚
â”‚  â””â”€â”€ On error: "Failed to load backlinks"          â”‚
â”‚                                                     â”‚
â”‚  viewMode: 'list' | 'grouped'                      â”‚
â”‚  â”œâ”€â”€ Initial: 'grouped'                            â”‚
â”‚  â””â”€â”€ Toggle: User clicks view button               â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Reference Type Calculation

```
Input: SimilarNode from database
  {
    node_id: string
    similarity_score: number (0.0 - 1.0)
    computation_method: string
    shared_attributes: string[]
  }

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Reference Type Algorithm                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  if (score >= 0.8)                             â”‚
â”‚    return "similar"                             â”‚
â”‚                                                 â”‚
â”‚  else if (score >= 0.6 && attrs.length >= 3)   â”‚
â”‚    return "sibling"                             â”‚
â”‚                                                 â”‚
â”‚  else if (method === "manual")                  â”‚
â”‚    return "manual"                              â”‚
â”‚                                                 â”‚
â”‚  else                                           â”‚
â”‚    return "related"                             â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Examples:
  score=0.91, attrs=5 â†’ "similar"
  score=0.72, attrs=4 â†’ "sibling"
  score=0.50, method=manual â†’ "manual"
  score=0.45, attrs=2 â†’ "related"
```

## View Rendering Logic

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Render Decision Tree                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  if (loading)                                  â”‚
â”‚    â†’ Render Loading State                      â”‚
â”‚      - Animated spinner                         â”‚
â”‚      - "Loading backlinks..." message           â”‚
â”‚                                                 â”‚
â”‚  else if (error)                                â”‚
â”‚    â†’ Render Error State                         â”‚
â”‚      - Warning icon                             â”‚
â”‚      - Error message                            â”‚
â”‚                                                 â”‚
â”‚  else if (backlinks.length === 0)              â”‚
â”‚    â†’ Render Empty State                         â”‚
â”‚      - Link icon                                â”‚
â”‚      - "No backlinks found"                     â”‚
â”‚      - Helpful hint text                        â”‚
â”‚                                                 â”‚
â”‚  else                                           â”‚
â”‚    â†’ Render Data                                â”‚
â”‚      if (viewMode === 'grouped')               â”‚
â”‚        â†’ Render Grouped View                    â”‚
â”‚          - Group headers by type                â”‚
â”‚          - Items under each group               â”‚
â”‚                                                 â”‚
â”‚      else if (viewMode === 'list')             â”‚
â”‚        â†’ Render List View                       â”‚
â”‚          - All items in single list             â”‚
â”‚          - Reference type as badge              â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Performance Optimizations

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Performance Strategies                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  Backend:                                       â”‚
â”‚  â”œâ”€â”€ Indexed queries on node_similarity        â”‚
â”‚  â”œâ”€â”€ Batch node loading (parallel)             â”‚
â”‚  â”œâ”€â”€ Server-side grouping                       â”‚
â”‚  â”œâ”€â”€ Limited results (default 10)              â”‚
â”‚  â””â”€â”€ Efficient SQL with UNION                   â”‚
â”‚                                                 â”‚
â”‚  Frontend:                                      â”‚
â”‚  â”œâ”€â”€ useEffect dependency on nodeId            â”‚
â”‚  â”œâ”€â”€ Single API call per node                  â”‚
â”‚  â”œâ”€â”€ Memoized helper functions                 â”‚
â”‚  â”œâ”€â”€ CSS animations (GPU accelerated)          â”‚
â”‚  â””â”€â”€ Virtual scrolling (future)                â”‚
â”‚                                                 â”‚
â”‚  Database:                                      â”‚
â”‚  â”œâ”€â”€ idx_node_similarity_a                     â”‚
â”‚  â”œâ”€â”€ idx_node_similarity_b                     â”‚
â”‚  â””â”€â”€ Foreign key constraints                   â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Error Handling

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Error Flow                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  API Error â†’ Catch in component                â”‚
â”‚    â”‚                                            â”‚
â”‚    â”œâ”€â”€ Network error                            â”‚
â”‚    â”‚   â””â”€â”€ Display: "Failed to load backlinks" â”‚
â”‚    â”‚                                            â”‚
â”‚    â”œâ”€â”€ 404 Not Found                            â”‚
â”‚    â”‚   â””â”€â”€ Display: Error message               â”‚
â”‚    â”‚                                            â”‚
â”‚    â”œâ”€â”€ 500 Server Error                         â”‚
â”‚    â”‚   â””â”€â”€ Display: Error message               â”‚
â”‚    â”‚                                            â”‚
â”‚    â””â”€â”€ Log to console for debugging             â”‚
â”‚                                                 â”‚
â”‚  Graceful Degradation:                          â”‚
â”‚  â”œâ”€â”€ Missing logo_url â†’ Show placeholder        â”‚
â”‚  â”œâ”€â”€ Missing description â†’ Skip display         â”‚
â”‚  â”œâ”€â”€ Empty attributes â†’ Hide tags section       â”‚
â”‚  â””â”€â”€ Invalid data â†’ Filter out null entries     â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Integration Points

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Integration with Existing Systems            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                  â”‚
â”‚  DetailPanel                                     â”‚
â”‚  â”œâ”€â”€ Tabs system                                â”‚
â”‚  â”œâ”€â”€ Node selection                             â”‚
â”‚  â””â”€â”€ Navigation callbacks                       â”‚
â”‚                                                  â”‚
â”‚  Similarity System                               â”‚
â”‚  â”œâ”€â”€ node_similarity table                      â”‚
â”‚  â”œâ”€â”€ Computation methods                        â”‚
â”‚  â””â”€â”€ Similarity scores                          â”‚
â”‚                                                  â”‚
â”‚  Node System                                     â”‚
â”‚  â”œâ”€â”€ Node metadata                              â”‚
â”‚  â”œâ”€â”€ Node titles                                â”‚
â”‚  â””â”€â”€ Node logos                                 â”‚
â”‚                                                  â”‚
â”‚  API Layer                                       â”‚
â”‚  â”œâ”€â”€ Express routes                             â”‚
â”‚  â”œâ”€â”€ Validation middleware                      â”‚
â”‚  â””â”€â”€ Error handling                             â”‚
â”‚                                                  â”‚
â”‚  Design System                                   â”‚
â”‚  â”œâ”€â”€ Gum color variables                        â”‚
â”‚  â”œâ”€â”€ Spacing system                             â”‚
â”‚  â””â”€â”€ Typography scale                           â”‚
â”‚                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
